### JAVA虚拟机对锁的优化部分
#### 1.偏向锁
这个是什么意思呢？

##### 核心思想就是:如果一个线程拿到了锁，那么该锁进入偏向模式，当这个线程再次请求该锁的时候，就不需要任何同步操作，这样就节省了大量有关锁的申请操作，从而提高系统性能。

##### 但是这种会在锁竞争很激烈的时候效果特别不好。因为在竞争激烈的场合，最有可能的情况是每次都是不同线程来申请锁。

#### 2.轻量级锁
如果偏向锁失效了，那么虚拟机不会立即挂起线程，它还会使用一种称之为轻量级锁的优化。就是简单的将对象头部作为指针指向持有锁的线程堆栈的内部(比如sync，锁定的就是对象头)，来判断一个线程是否持有对象锁。

如果成功拿到轻量级锁，那么顺利进入临界区，如果拿不到，则膨胀成重量级锁。

#### 3.自旋锁
这个很重要，面试也是经常问的。在锁膨胀之后，JAVA虚拟机还会做最后一次努力，就是自旋锁。

##### 当前状态线程拿不到锁，而且什么时候能拿到锁时间是不知道的，可能过一会就能拿到锁。那么这种条件下，如果简单粗暴的将线程挂起，显得有点笨。所以，虚拟机会让当前线程去做几个空循环(这就是自旋的意思)，在几次循环之后拿到锁就进入临界区，如果还拿不到才会挂起线程。